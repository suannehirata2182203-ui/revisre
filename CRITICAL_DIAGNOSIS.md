# üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê: –°–ê–ô–¢ –ù–ï –†–ê–ë–û–¢–ê–ï–¢

## –ü–†–û–ë–õ–ï–ú–ê
–ü–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è JavaScript injection —Å–∞–π—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Å—Ç–∞–ª —Ä–∞–±–æ—Ç–∞—Ç—å - —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—É—Å—Ç—ã–µ (–±–µ–ª—ã–µ/—á–µ—Ä–Ω—ã–µ).

## –ê–ù–ê–õ–ò–ó –õ–û–ì–û–í
```
[PAYMENT INTERCEPT] Injecting JavaScript into HTML page: GET /products
[PAYMENT INTERCEPT] Injecting JavaScript into HTML page: GET /collections/phone-cases
```
- JavaScript injection –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –¥–ª—è –≤—Å–µ—Ö HTML —Å—Ç—Ä–∞–Ω–∏—Ü
- –ù–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è - –ø—É—Å—Ç—ã–µ

## –í–û–ó–ú–û–ñ–ù–´–ï –ü–†–ò–ß–ò–ù–´

### 1. ‚ùå –°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –≤ JavaScript –∫–æ–¥–µ
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫ –≤ thankYouPage
- –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã (`, $, \, ") –º–æ–≥—É—Ç –ª–æ–º–∞—Ç—å JavaScript
- –ú–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã

### 2. ‚ùå –ü–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–µ HTML —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- –í–Ω–µ–¥—Ä–µ–Ω–∏–µ JavaScript –º–æ–∂–µ—Ç –ª–æ–º–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É HTML
- –ï—Å–ª–∏ HTML –Ω–µ–ø–æ–ª–Ω—ã–π –∏–ª–∏ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω, –±—Ä–∞—É–∑–µ—Ä –Ω–µ –º–æ–∂–µ—Ç –µ–≥–æ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å
- –í–æ–∑–º–æ–∂–Ω–æ, –º—ã –≤—Å—Ç–∞–≤–ª—è–µ–º —Å–∫—Ä–∏–ø—Ç –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ

### 3. ‚ùå –ü—Ä–æ–±–ª–µ–º—ã —Å selfHandleResponse
- selfHandleResponse —Ç—Ä–µ–±—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –í–°–ï–• –æ—Ç–≤–µ—Ç–æ–≤
- –ï—Å–ª–∏ –º—ã –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–∞–∫–æ–π-—Ç–æ –æ—Ç–≤–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –æ–Ω –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ—Ç–µ—Ä—è–Ω
- –í–æ–∑–º–æ–∂–Ω–æ, –º—ã –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–∏–ø—ã –æ—Ç–≤–µ—Ç–æ–≤

### 4. ‚ùå –ü—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ Buffer/Stream
- –ü—Ä–æ–±–ª–µ–º—ã —Å charset
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ —Å—Ç—Ä–æ–∫—É

### 5. ‚ùå –û—à–∏–±–∫–∏ –≤ JavaScript –∫–æ–¥–µ
- JavaScript –∫–æ–¥ –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –æ—à–∏–±–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –ª–æ–º–∞—é—Ç –≤—Å—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
- –ë—Ä–∞—É–∑–µ—Ä –º–æ–∂–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∏–∑-–∑–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
- CSP (Content Security Policy) –º–æ–∂–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

## –†–ï–ê–õ–¨–ù–ê–Ø –ü–†–ò–ß–ò–ù–ê (–ì–ò–ü–û–¢–ï–ó–ê)

–°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –ø—Ä–æ–±–ª–µ–º–∞ –≤:
1. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ thankYouPage** - —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã –ª–æ–º–∞—é—Ç JavaScript —Å—Ç—Ä–æ–∫—É
2. **JavaScript –∫–æ–¥ –ª–æ–º–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É** - –æ—à–∏–±–∫–∏ –≤ –∫–æ–¥–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤—Å–µ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞
3. **selfHandleResponse –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ —Å–ª—É—á–∞–∏** - –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã —Ç–µ—Ä—è—é—Ç—Å—è

## –ü–õ–ê–ù –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø—Ä–∞–≤–∏–ª—å–Ω–æ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã
2. **–î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫** - –æ–±–µ—Ä–Ω—É—Ç—å JavaScript –≤ try-catch
3. **–£–ª—É—á—à–∏—Ç—å –ª–æ–≥–∏–∫—É –≤–Ω–µ–¥—Ä–µ–Ω–∏—è** - –ø—Ä–æ–≤–µ—Ä—è—Ç—å, —á—Ç–æ HTML –≤–∞–ª–∏–¥–Ω—ã–π
4. **–î–æ–±–∞–≤–∏—Ç—å fallback** - –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫, –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
5. **–£–ø—Ä–æ—Å—Ç–∏—Ç—å JavaScript** - —É–±—Ä–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –ª–æ–º–∞—Ç—å—Å—è

